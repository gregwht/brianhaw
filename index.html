<!DOCTYPE html>
<html>
  <head>

    <title>The most basic form of geolocation</title>

    <p id="demo"></p>

    <script type="text/javascript">

    <!--Geolocation Code -->
      var x = document.getElementById("demo");

      function TestGeo()
          {
               if (navigator.geolocation)
                  {
                    navigator.geolocation.watchPosition( TestMap, error, {maximumAge: 1000, timeout: 10000, enableHighAccuracy: true} );
              }
              else
              {
                    x.innerHTML = "Geolocation is not supported by this browser."
              }
          }

      function TestMap(position) {
      	var latitude = position.coords.latitude;
      	var longitude = position.coords.longitude;
      	 x.innerHTML = "Latitude: " + position.coords.latitude +
      	    "<br>Longitude: " + position.coords.longitude +
      	    "<br>Accuracy: " + position.coords.accuracy;
      	}

      function error() {
      		x.innerHTML = "Cannot locate user."
      		}


    <!--Audio Player Code -->
      // Create audio context
      var context;
      var bufferLoader;
      window.addEventListener('load', init, false);

      function init(){
          //Fix up for prefixing
          window.AudioContext = window.AudioContext||window.webkitAudioContext;
          context = new AudioContext();

          bufferLoader = new BufferLoader(
            context,
            [
              '/sounds/hit.mp3',
              '/sounds/knock.mp3',
            ],
            finishedLoading
          );
        bufferLoader.load();
      }

      function finishedLoading(bufferList) {
        // Create two sources and play them both together
        var source1 = context.createBufferSource();
        var source2 = context.createBufferSource();
        source1.buffer = bufferList[0];
        source2.buffer = bufferList[1];

        source1.connect(context.destination);
        source2.connect(context.destination);
        source1.start(0);
        source2.start(0);
      }
      // Load sounds
      var dogBarkingBuffer = null;
      var url = "https://clyp.it/urzipw02";
      function loadDogSound(url) {
        var request = new XMLHttpRequest();
        request.open('GET', url, true);
        request.responseType = 'arraybuffer';

      //Decode asynchronously
      request.onload = function() {
        context.decodeAudioData(request.response, function(buffer) {
          dogBarkingBuffer = buffer;
        }, onError);
        }
        request.send();
      }

      // Play sounds
      function playSound(buffer){
        var source = context.createBufferSource();  // Creates a sound source
        source.buffer = buffer; // tell the source which sound to play
        source.connect(context.destination);  // connect the source to the context's destination (the speakers)
        source.start(0);  // play the source now
        // note: on older systems, may have to use deprecated noteOn(time);

        // An important point to note is that on iOS, Apple currently mutes all sound output until the first time a sound is played during a user interaction event - for example, calling playSound() inside a touch event handler. You may struggle with Web Audio on iOS "not working" unless you circumvent this - in order to avoid problems like this, just play a sound (it can even be muted by connecting to a Gain Node with zero gain) inside an early UI event - e.g. "touch here to play".



      }

    </script>

  </head>

  <body onload="TestGeo();">

  </body>
</html>
